# PetShop - Учебный проект веб-магазина на ASP.NET Core

![C#](https://img.shields.io/badge/C%23-11-blue.svg)
![.NET](https://img.shields.io/badge/.NET-9.0-blueviolet.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)

Полнофункциональное веб-приложение для зоомагазина, созданное на ASP.NET Core 9. Этот проект демонстрирует реализацию архитектуры "Модульный монолит" и применение лучших практик современной веб-разработки на платформе .NET.

## О проекте

Этот проект был создан с целью закрепления теоретических знаний, полученных из книг "ASP.NET Core в действии" (Эндрю Лок) и "Entity Framework Core в действии". Основная задача — построить с нуля целостную, поддерживаемую и безопасную систему, которая имитирует реальный коммерческий продукт.

Проект разделен на три логических модуля, что отражает понимание принципов разделения ответственности (Separation of Concerns).

## Ключевые возможности

### Клиентское приложение (`PetShop.Web.Client`)

*   **Регистрация и аутентификация пользователей:** Безопасная система регистрации и входа с использованием ASP.NET Core Identity.
*   **Каталог товаров с пагинацией:** Удобный просмотр товаров с разбивкой на страницы.
*   **Детальная страница товара:** Полное описание, цена и возможность добавить товар в корзину.
*   **Персональная корзина:** Каждый зарегистрированный пользователь имеет свою корзину.
*   **Интерактивное управление корзиной:** Возможность изменять количество товаров и удалять позиции (реализовано самостоятельно).
*   **Имитация покупки:** Процесс "покупки", который уменьшает количество товара на складе и очищает корзину в рамках одной транзакции.

###  Панель администратора (`PetShop.Web.Admin`)

*   **Безопасный доступ:** Вход в панель доступен только пользователям с ролью "Admin".
*   **Dashboard:** Информативная главная страница с основной статистикой по магазину.
*   **Полное управление товарами (CRUD):** Создание, чтение, обновление и удаление товаров.
*   **Управление пользователями:** Просмотр списка всех зарегистрированных пользователей.
*   **Просмотр корзин пользователей:** Возможность видеть содержимое корзины любого клиента.

##  Архитектура

Проект построен по архитектуре **Модульный монолит**. Это позволяет сохранить простоту разработки и развертывания монолита, при этом обеспечивая логическую изоляцию и слабую связанность компонентов, как в микросервисах.

Решение состоит из трех проектов:

1.  **`PetShop.Core` (Библиотека классов)**
    *   **Роль:** Ядро системы. Содержит все доменные модели (`Product`, `ApplicationUser`, `Cart`), контекст базы данных (`ApplicationDbContext`) и общую бизнес-логику.
    *   **Зависимости:** Не зависит ни от одного другого проекта в решении. Является фундаментом для всей системы.

2.  **`PetShop.Web.Admin` (Веб-приложение Razor Pages)**
    *   **Роль:** Слой представления для администраторов. Реализует весь административный функционал.
    *   **Зависимости:** Зависит только от `PetShop.Core`.

3.  **`PetShop.Web.Client` (Веб-приложение Razor Pages)**
    *   **Роль:** Слой представления для клиентов. Реализует публичную часть магазина.
    *   **Зависимости:** Зависит только от `PetShop.Core`.

Такая структура с однонаправленными зависимостями (`Web -> Core`) обеспечивает высокую поддерживаемость и гибкость проекта.

## Технологический стек

*   ** Бэкенд:** ASP.NET Core 9, Razor Pages, ASP.NET Core Identity, LINQ
*   ** База данных:** SQL Server (LocalDB), Entity Framework Core 9 (Code-First)
*   ** Фронтенд:** HTML5, CSS3, Bootstrap 5
*   ** Инструменты:** .NET CLI, Git, Visual Studio, .NET Secret Manager

##  Как запустить проект локально

### Предварительные требования
*   [.NET 9 SDK](https://dotnet.microsoft.com/download/dotnet/9.0)
*   [Visual Studio 2022](https://visualstudio.microsoft.com/) с рабочей нагрузкой "ASP.NET and web development"
*   SQL Server Express LocalDB (обычно устанавливается вместе с Visual Studio)

### 1. Клонирование репозитория
```bash
git clone https://github.com/Leonard457/Pet-Project_Shop.git
cd Pet-Project_Shop
```

### 2. Настройка секретов
Этот проект использует **.NET Secret Manager** для безопасного хранения строки подключения к БД и пароля администратора. Вам нужно настроить его для **каждого** веб-проекта.

**Для проекта `PetShop.Web.Admin`:**
1. Откройте терминал в папке `PetShop.Web.Admin`.
2. Выполните команду `dotnet user-secrets init`.
3. Выполните команды для добавления секретов:
   ```bash
   dotnet user-secrets set "ConnectionStrings:DefaultConnection" "Server=(localdb)\\mssqllocaldb;Database=PetShopDb;Trusted_Connection=True;MultipleActiveResultSets=true"
   dotnet user-secrets set "AdminUser:Password" "СЕКРЕТНЫЙ_ПАРОЛЬ"
   ```

**Для проекта `PetShop.Web.Client`:**
1. Откройте терминал в папке `PetShop.Web.Client`.
2. Выполните команду `dotnet user-secrets init`.
3. Выполните команду для добавления строки подключения:
   ```bash
   dotnet user-secrets set "ConnectionStrings:DefaultConnection" "Server=(localdb)\\mssqllocaldb;Database=PetShopDb;Trusted_Connection=True;MultipleActiveResultSets=true"
   ```

### 3. Применение миграций базы данных
1. Откройте решение в Visual Studio.
2. Откройте `Package Manager Console` (View -> Other Windows -> Package Manager Console).
3. Убедитесь, что в качестве `Default project` выбран `PetShop.Core`.
4. Выполните команду для создания и применения миграций:
   ```powershell
   Update-Database
   ```
   Эта команда создаст базу данных `PetShopDb` на вашем LocalDB сервере.

### 4. Запуск приложения
1. В Visual Studio кликните правой кнопкой мыши на решении (`Solution`) в Solution Explorer.
2. Выберите `Set Startup Projects...`.
3. Выберите `Multiple startup projects` и для `PetShop.Web.Admin` и `PetShop.Web.Client` установите `Action` в `Start`.
4. Нажмите `F5` или зеленую стрелку для запуска. Оба сайта откроются в разных вкладках браузера.

## Возможные улучшения (Roadmap)

Этот проект является прочным фундаментом, но есть много путей для его дальнейшего развития:
*   **Поиск и фильтрация:** Добавить на страницу каталога полнотекстовый поиск и фильтрацию по категориям товаров.
*   **Сортировка:** Реализовать сортировку товаров по цене и названию.
*   **Загрузка изображений:** Создать для администратора интерфейс для удобной загрузки изображений товаров через веб-форму.
*   **Тестирование:** Написать Unit-тесты для бизнес-логики и интеграционные тесты для ключевых страниц.
*   **Переход на Clean Architecture:** Выделить бизнес-логику из Razor Pages в отдельный слой сервисов (`Application Layer`).

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности смотрите в файле `LICENSE`.
